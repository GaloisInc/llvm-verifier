import "AES.cry";

let {{ aesExtract x = join (reverse (groupBy`{32} (aesEncrypt (pt,key))))
             where [pt,key] = split x
    }};

let main = do {
  print "Loading LLVM implementation";
  f <- load_aig "aes.aig";

  print "Bitblasting Cryptol implementation";
  g <- bitblast {{ aesExtract }};

  print "Checking equivalence";
  res <- cec f g;
  print res;
};
