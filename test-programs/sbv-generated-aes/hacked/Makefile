# Makefile for aes128BlockEncrypt. Automatically generated by SBV. Do not edit!

# include any user-defined .mk file in the current directory.
-include *.mk

CC=gcc
CCFLAGS?=-Wall -O3 -DNDEBUG -fomit-frame-pointer -I.

all: aes128BlockEncrypt_driver aes128BlockEncrypt_driver_llvm aes.bc

%.bc: %.c
	clang -emit-llvm -I. -c $< -o $@

aes128BlockEncrypt.o: aes128BlockEncrypt.c aes128BlockEncrypt.h
	${CC} ${CCFLAGS} -c $< -o $@

%.o: %.c
	${CC} ${CCFLAGS} -c $< -o $@

aes128BlockEncrypt_driver: aes128BlockEncrypt.o aes128BlockEncrypt_driver.o sym-api.o
	${CC} ${CCFLAGS} $^ -o $@

aes.bc: aes128BlockEncrypt.bc aes128BlockEncrypt_driver.bc
	llvm-link $^ -o $@

aes128BlockEncrypt_driver_llvm: aes128BlockEncrypt.bc aes128BlockEncrypt_driver.bc sym-api.bc
	llvm-dis aes128BlockEncrypt.bc
	llvm-dis aes128BlockEncrypt_driver.bc
	llvm-ld -v -disable-opt -native $^ -o $@

check:
	cryptol -B ref/equivAES.scr

clean:
	rm -f *.o *.bc *.ll *.s aes128BlockEncrypt_driver aes128BlockEncrypt_driver_llvm aes.aig
